
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>YUI Library Examples: IO: XML Transaction &mdash; Retrieving a Yahoo! Weather RSS (XML) Feed via a Server-Side Proxy</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    	<link rel="stylesheet" type="text/css" href="../../assets/yui.css" >

<style>
    /*Supplemental CSS for the YUI distribution*/
    #custom-doc { width: 95%; min-width: 950px; }
    #pagetitle {background-image: url(../../assets/bg_hd.gif);}
/*    #pagetitle h1 {background-image: url(../../assets/title_h_bg.gif);}*/
</style>

<link rel="stylesheet" type="text/css" href="../../assets/dpSyntaxHighlighter.css">

<!--there is no custom header content for this example-->

<link type="text/css" rel="stylesheet" href="../../build/cssfonts/fonts-min.css" />
<script type="text/javascript" src="../../build/yui/yui-min.js"></script>

</head>
<body id="yahoo-com" class="yui3-skin-sam  yui-skin-sam">
<div id="custom-doc" class="yui-t2">
<div id="hd">
	<div id="ygunav">
		<p>
            <em>
                <a href="http://developer.yahoo.com/yui/3/">YUI 3.x Home</a> <i> - </i>	
            </em>
		</p>
		<form action="http://search.yahoo.com/search" id="sitesearchform">
            <input name="vs" type="hidden" value="developer.yahoo.com">
            <input name="vs" type="hidden" value="yuiblog.com">
		    <div id="sitesearch">
		    	<label for="searchinput">Site Search (YDN &amp; YUIBlog): </label>
			    <input type="text" id="searchinput" name="p">
			    <input type="submit" value="Search" id="searchsubmit" class="ygbt">
		    </div>
		</form>
    </div>
	<div id="ygma"><a href="../../"><img src="../../assets/logo.gif"  border="0" width="200" height="93"></a></div>
	<div id="pagetitle"><h1>YUI Library Examples: IO: XML Transaction &mdash; Retrieving a Yahoo! Weather RSS (XML) Feed via a Server-Side Proxy</h1></div>
</div>
<div id="bd">


	<div id="yui-main">
		<div class="yui-b">
		  <div class="yui-ge">
			  <div class="yui-u first example" id="main">

	<h2>IO: XML Transaction &mdash; Retrieving a Yahoo! Weather RSS (XML) Feed via a Server-Side Proxy</h2>

	<div id="example" class="promo">
	<div class="example-intro">
	<p>This example demonstrates how to use IO and a PHP proxy &mdash; to work around XMLHttpRequest's same-domain policy &mdash; to retrieve an XML document from <code>http://xml.weather.yahoo.com/forecastrss</code>.</p>

<p>To try out the example, fill in your five-digit US zip code, or Location ID.</p>	</div>	

	<div class="module example-container ">
			<div class="hd exampleHd">
			<p class="newWindowButton yui-skin-sam">
                <a href="io-weather_clean.html" target="_blank">View example in new window.</a>
            </p>
		</div>		<div id="example-canvas" class="bd">

		
	<!--BEGIN SOURCE CODE FOR EXAMPLE =============================== -->
	
	<form id="wForm">
<fieldset>
	<label>Zip Code or Location ID</label> <input type="text" id="zip" value="94089">
	<p>Please enter a U.S. Zip Code or a location ID to get the current temperature.  The default is Zip Code 94089 for Sunnyvale, California; its location ID is: USCA1116.</p>
</fieldset>
<div id="weatherModule"></div>
<input type="button" value="Get Weather RSS" id="getWeather">
</form>


<script language="javascript">

YUI().use("io",

	function(Y) {

		//Get a Node reference to the div we'll use for displaying
		//results:
		var div = Y.Node.get('#weatherModule');

		//Define a function to handle a successful response from
		//Yahoo! Weather.  The success handler will find the response
		//object in its second argument:
		function successHandler(id, o){
			Y.log("Success handler called; handler will parse the retrieved XML and insert into DOM.", "info", "example");
			var root = o.responseXML.documentElement;
			var oTitle = root.getElementsByTagName('description')[0].firstChild.nodeValue;
			var oDateTime = root.getElementsByTagName('lastBuildDate')[0].firstChild.nodeValue;
			var descriptionNode = root.getElementsByTagName('description')[1].firstChild.nodeValue;

			div.set("innerHTML", "<p>" + oTitle + "</p>" + "<p>" + oDateTime + "</p>" + descriptionNode);

			Y.log("Success handler is complete.", "info", "example");
		}

		//Provide a function that can help debug failed
		//requests:
		function failureHandler(id, o){
			Y.log("Failure handler called; http status: " + o.status, "info", "example");
			div.set("innerHTML", o.status + " " + o.statusText);
		}

		//When the Get RSS button is clicked, this function will fire
		//and compose/dispatch the IO request:
		function getModule(){
			//Get the input value:
			var iZip = Y.Node.get('#zip').get("value");

			//Create a querystring from the input value:
			var queryString = encodeURI('?p=' + iZip);

			//The location of our server-side proxy:
			var entryPoint = 'assets/weather.php';

			//Compile the full URI for the request:
			var sUrl = entryPoint + queryString;

			Y.log("Submitting request; zip code: " + iZip, "info", "example");

			//Make the reqeust:
			var request = Y.io(sUrl, {
				method:"GET",
				on:
					{
						success:successHandler,
						failure:failureHandler
					}
				}
			);
		}

		//Use the Event Utility to wire the Get RSS button
		//to the getModule function:
		Y.on("click", getModule, "#getWeather");

		Y.log("When you retrieve weather RSS data, relevant steps in the process will be reported here in the logger/console.", "info", "example");
	}
);
</script>
	
	<!--END SOURCE CODE FOR EXAMPLE =============================== -->
	
		
		</div>
	</div>			
	</div>
		
	<h2 class="first">Exploring the Code for This Example</h2>

<p>Create a YUI instance, using IO, for this example:</p>

<div id="syntax-cbf611a42471c554f5b655422cdd6919" class="yui-syntax-highlight"><div class="numbers"><pre class="javascript" style="font-family:monospace;"><ol><li class="li1"><div class="de1"><span class="co1">//Create a YUI instance including support for IO:</span></div></li><li class="li1"><div class="de1">YUI<span class="br0">&#40;</span><span class="br0">&#123;</span>base<span class="sy0">:</span><span class="st0">&quot;../../build/&quot;</span><span class="sy0">,</span> timeout<span class="sy0">:</span> <span class="nu0">10000</span><span class="br0">&#125;</span><span class="br0">&#41;</span>.<span class="kw2">use</span><span class="br0">&#40;</span><span class="st0">&quot;io-base&quot;</span><span class="sy0">,</span> <span class="kw2">function</span><span class="br0">&#40;</span>Y<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">	<span class="co1">// Y is the YUI instance.</span></div></li><li class="li1"><div class="de1">	<span class="co1">// The rest of the following code is encapsulated in this</span></div></li><li class="li2"><div class="de2">	<span class="co1">// anonymous function.</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre></div><div class="nonumbers"><pre class="javascript" style="font-family:monospace;"><span class="co1">//Create a YUI instance including support for IO:</span>
YUI<span class="br0">&#40;</span><span class="br0">&#123;</span>base<span class="sy0">:</span><span class="st0">&quot;../../build/&quot;</span><span class="sy0">,</span> timeout<span class="sy0">:</span> <span class="nu0">10000</span><span class="br0">&#125;</span><span class="br0">&#41;</span>.<span class="kw2">use</span><span class="br0">&#40;</span><span class="st0">&quot;io-base&quot;</span><span class="sy0">,</span> <span class="kw2">function</span><span class="br0">&#40;</span>Y<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="co1">// Y is the YUI instance.</span>
	<span class="co1">// The rest of the following code is encapsulated in this</span>
	<span class="co1">// anonymous function.</span>
<span class="br0">&#125;</span> <span class="br0">&#41;</span><span class="sy0">;</span></pre></div><textarea id="syntax-cbf611a42471c554f5b655422cdd6919-plain">//Create a YUI instance including support for IO:
YUI({base:"../../build/", timeout: 10000}).use("io-base", function(Y) {
	// Y is the YUI instance.
	// The rest of the following code is encapsulated in this
	// anonymous function.
} );</textarea></div>
<h3>Callback Object and the Weather RSS</h3>
<p><a href="http://developer.yahoo.com/weather/">Yahoo! Weather RSS</a> will return an XML document if the transaction is successful. The following <code>success</code> callback handlers is used to process the response.</p>
<div id="syntax-ce594b2ff547e40784d7576d4488c4d9" class="yui-syntax-highlight"><div class="numbers"><pre class="javascript" style="font-family:monospace;"><ol><li class="li1"><div class="de1"><span class="co1">//Define a function to handle a successful response from</span></div></li><li class="li1"><div class="de1"><span class="co1">//Yahoo! Weather.  The success handler will find the response</span></div></li><li class="li1"><div class="de1"><span class="co1">//object in its second argument:</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> successHandler<span class="br0">&#40;</span>id<span class="sy0">,</span> o<span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li2"><div class="de2">    Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler called; handler will parse the retrieved XML and insert into DOM.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> root <span class="sy0">=</span> o.<span class="me1">responseXML</span>.<span class="me1">documentElement</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> oTitle <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> oDateTime <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'lastBuildDate'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> descriptionNode <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">    div.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;innerHTML&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oTitle <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oDateTime <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> descriptionNode<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler is complete.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre></div><div class="nonumbers"><pre class="javascript" style="font-family:monospace;"><span class="co1">//Define a function to handle a successful response from</span>
<span class="co1">//Yahoo! Weather.  The success handler will find the response</span>
<span class="co1">//object in its second argument:</span>
<span class="kw2">function</span> successHandler<span class="br0">&#40;</span>id<span class="sy0">,</span> o<span class="br0">&#41;</span><span class="br0">&#123;</span>
    Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler called; handler will parse the retrieved XML and insert into DOM.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw2">var</span> root <span class="sy0">=</span> o.<span class="me1">responseXML</span>.<span class="me1">documentElement</span><span class="sy0">;</span>
    <span class="kw2">var</span> oTitle <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span>
    <span class="kw2">var</span> oDateTime <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'lastBuildDate'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span>
    <span class="kw2">var</span> descriptionNode <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span>
&nbsp;
    div.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;innerHTML&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oTitle <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oDateTime <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> descriptionNode<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler is complete.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div><textarea id="syntax-ce594b2ff547e40784d7576d4488c4d9-plain">//Define a function to handle a successful response from
//Yahoo! Weather.  The success handler will find the response
//object in its second argument:
function successHandler(id, o){
    Y.log("Success handler called; handler will parse the retrieved XML and insert into DOM.", "info", "example");
    var root = o.responseXML.documentElement;
    var oTitle = root.getElementsByTagName('description')[0].firstChild.nodeValue;
    var oDateTime = root.getElementsByTagName('lastBuildDate')[0].firstChild.nodeValue;
    var descriptionNode = root.getElementsByTagName('description')[1].firstChild.nodeValue;

    div.set("innerHTML", "<p>" + oTitle + "</p>" + "<p>" + oDateTime + "</p>" + descriptionNode);

    Y.log("Success handler is complete.", "info", "example");
}</textarea></div>
<h3>Assemble the Querystring and Initiate the Transaction</h3>
<p>The Yahoo! Weather RSS feed requires a simple HTTP GET request with a base URL and a querystring containing the required information as a name-value pair.  In this example, we will use the following parameter:</p>
<ul>
	<li><code>p</code> &mdash; location as U.S. Zip Code or Location ID</li>
</ul>

<p>The following are some example location IDs (do not include the city name):</p>
<ul>
	<li><strong>Beijing</strong>: <em>CHXX0008</em></li>
	<li><strong>Helsinki</strong>: <em>FIXX0002</em></li>
	<li><strong>London</strong>: <em>UKXX0085</em></li>
	<li><strong>Moscow</strong>: <em>RSXX0063</em></li>
	<li><strong>Munich</strong>: <em>GMXX0087</em></li>
	<li><strong>Paris</strong>: <em>FRXX0076</em></li>
	<li><strong>Riyadh</strong>: <em>SAXX0017</em></li>
	<li><strong>Tokyo</strong>: <em>JAXX0085</em></li>
</ul>
<p>For more details on the Yahoo! Weather RSS feed and other location IDs, please visit <a href="http://developer.yahoo.com/weather/index.html">http://developer.yahoo.com/weather/index.html</a>.
<p>Function <code>getModule</code> retrieves the input values for location and creates a querystring:</p>
<div id="syntax-1898d4b48ea496df6795a166dea6d21f" class="yui-syntax-highlight"><div class="numbers"><pre class="javascript" style="font-family:monospace;"><ol><li class="li1"><div class="de1"><span class="co1">//When the Get RSS button is clicked, this function will fire</span></div></li><li class="li1"><div class="de1"><span class="co1">//and compose/dispatch the IO request:</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> getModule<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Get the input value:</span></div></li><li class="li2"><div class="de2">    <span class="kw2">var</span> iZip <span class="sy0">=</span> Y.<span class="me1">Node</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">'#zip'</span><span class="br0">&#41;</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">&quot;value&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Create a querystring from the input value:</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> queryString <span class="sy0">=</span> <span class="kw1">encodeURI</span><span class="br0">&#40;</span><span class="st0">'?p='</span> <span class="sy0">+</span> iZip<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">    <span class="co1">//The location of our server-side proxy:</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> entryPoint <span class="sy0">=</span> <span class="st0">'(assets/)weather.php'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Compile the full URI for the request:</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> sUrl <span class="sy0">=</span> entryPoint <span class="sy0">+</span> queryString<span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">    Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Submitting request; zip code: &quot;</span> <span class="sy0">+</span> iZip<span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Make the reqeust:</span></div></li><li class="li1"><div class="de1">    <span class="kw2">var</span> request <span class="sy0">=</span> Y.<span class="me1">io</span><span class="br0">&#40;</span>sUrl<span class="sy0">,</span> <span class="br0">&#123;</span></div></li><li class="li2"><div class="de2">        method<span class="sy0">:</span><span class="st0">&quot;GET&quot;</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">        on<span class="sy0">:</span></div></li><li class="li1"><div class="de1">            <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">                success<span class="sy0">:</span>successHandler<span class="sy0">,</span></div></li><li class="li1"><div class="de1">                failure<span class="sy0">:</span>failureHandler</div></li><li class="li2"><div class="de2">            <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">        <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2"><span class="co1">//Use the Event Utility to wire the Get RSS button</span></div></li><li class="li1"><div class="de1"><span class="co1">//to the getModule function:</span></div></li><li class="li1"><div class="de1">Y.<span class="me1">on</span><span class="br0">&#40;</span><span class="st0">&quot;click&quot;</span><span class="sy0">,</span> getModule<span class="sy0">,</span> <span class="st0">&quot;#getWeather&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre></div><div class="nonumbers"><pre class="javascript" style="font-family:monospace;"><span class="co1">//When the Get RSS button is clicked, this function will fire</span>
<span class="co1">//and compose/dispatch the IO request:</span>
<span class="kw2">function</span> getModule<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//Get the input value:</span>
    <span class="kw2">var</span> iZip <span class="sy0">=</span> Y.<span class="me1">Node</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">'#zip'</span><span class="br0">&#41;</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">&quot;value&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//Create a querystring from the input value:</span>
    <span class="kw2">var</span> queryString <span class="sy0">=</span> <span class="kw1">encodeURI</span><span class="br0">&#40;</span><span class="st0">'?p='</span> <span class="sy0">+</span> iZip<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//The location of our server-side proxy:</span>
    <span class="kw2">var</span> entryPoint <span class="sy0">=</span> <span class="st0">'(assets/)weather.php'</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//Compile the full URI for the request:</span>
    <span class="kw2">var</span> sUrl <span class="sy0">=</span> entryPoint <span class="sy0">+</span> queryString<span class="sy0">;</span>
&nbsp;
    Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Submitting request; zip code: &quot;</span> <span class="sy0">+</span> iZip<span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//Make the reqeust:</span>
    <span class="kw2">var</span> request <span class="sy0">=</span> Y.<span class="me1">io</span><span class="br0">&#40;</span>sUrl<span class="sy0">,</span> <span class="br0">&#123;</span>
        method<span class="sy0">:</span><span class="st0">&quot;GET&quot;</span><span class="sy0">,</span>
        on<span class="sy0">:</span>
            <span class="br0">&#123;</span>
                success<span class="sy0">:</span>successHandler<span class="sy0">,</span>
                failure<span class="sy0">:</span>failureHandler
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//Use the Event Utility to wire the Get RSS button</span>
<span class="co1">//to the getModule function:</span>
Y.<span class="me1">on</span><span class="br0">&#40;</span><span class="st0">&quot;click&quot;</span><span class="sy0">,</span> getModule<span class="sy0">,</span> <span class="st0">&quot;#getWeather&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></div><textarea id="syntax-1898d4b48ea496df6795a166dea6d21f-plain">//When the Get RSS button is clicked, this function will fire
//and compose/dispatch the IO request:
function getModule(){
    //Get the input value:
    var iZip = Y.Node.get('#zip').get("value");

    //Create a querystring from the input value:
    var queryString = encodeURI('?p=' + iZip);

    //The location of our server-side proxy:
    var entryPoint = '(assets/)weather.php';

    //Compile the full URI for the request:
    var sUrl = entryPoint + queryString;

    Y.log("Submitting request; zip code: " + iZip, "info", "example");

    //Make the reqeust:
    var request = Y.io(sUrl, {
        method:"GET",
        on:
            {
                success:successHandler,
                failure:failureHandler
            }
        }
    );
}

//Use the Event Utility to wire the Get RSS button
//to the getModule function:
Y.on("click", getModule, "#getWeather");</textarea></div>
<h3>Full Script Source</h3>

<p>Here is the full JavaScript source for this example:</p>

<div id="syntax-ab62e8f22fc956412f4992ef946e6bff" class="yui-syntax-highlight"><div class="numbers"><pre class="javascript" style="font-family:monospace;"><ol><li class="li1"><div class="de1">YUI<span class="br0">&#40;</span><span class="br0">&#123;</span>base<span class="sy0">:</span><span class="st0">&quot;../../build/&quot;</span><span class="sy0">,</span> timeout<span class="sy0">:</span> <span class="nu0">10000</span><span class="br0">&#125;</span><span class="br0">&#41;</span>.<span class="kw2">use</span><span class="br0">&#40;</span><span class="st0">&quot;io&quot;</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="kw2">function</span><span class="br0">&#40;</span>Y<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">		<span class="co1">//Get a Node reference to the div we'll use for displaying</span></div></li><li class="li1"><div class="de1">		<span class="co1">//results:</span></div></li><li class="li1"><div class="de1">		<span class="kw2">var</span> div <span class="sy0">=</span> Y.<span class="me1">Node</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">'#weatherModule'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="co1">//Define a function to handle a successful response from</span></div></li><li class="li2"><div class="de2">		<span class="co1">//Yahoo! Weather.  The success handler will find the response</span></div></li><li class="li1"><div class="de1">		<span class="co1">//object in its second argument:</span></div></li><li class="li1"><div class="de1">		<span class="kw2">function</span> successHandler<span class="br0">&#40;</span>id<span class="sy0">,</span> o<span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler called; handler will parse the retrieved XML and insert into DOM.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> root <span class="sy0">=</span> o.<span class="me1">responseXML</span>.<span class="me1">documentElement</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">			<span class="kw2">var</span> oTitle <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> oDateTime <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'lastBuildDate'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> descriptionNode <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			div.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;innerHTML&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oTitle <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oDateTime <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> descriptionNode<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler is complete.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="co1">//Provide a function that can help debug failed</span></div></li><li class="li2"><div class="de2">		<span class="co1">//requests:</span></div></li><li class="li1"><div class="de1">		<span class="kw2">function</span> failureHandler<span class="br0">&#40;</span>id<span class="sy0">,</span> o<span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Failure handler called; http status: &quot;</span> <span class="sy0">+</span> o.<span class="kw3">status</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			div.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;innerHTML&quot;</span><span class="sy0">,</span> o.<span class="kw3">status</span> <span class="sy0">+</span> <span class="st0">&quot; &quot;</span> <span class="sy0">+</span> o.<span class="me1">statusText</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="co1">//When the Get RSS button is clicked, this function will fire</span></div></li><li class="li1"><div class="de1">		<span class="co1">//and compose/dispatch the IO request:</span></div></li><li class="li1"><div class="de1">		<span class="kw2">function</span> getModule<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			<span class="co1">//Get the input value:</span></div></li><li class="li2"><div class="de2">			<span class="kw2">var</span> iZip <span class="sy0">=</span> Y.<span class="me1">Node</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">'#zip'</span><span class="br0">&#41;</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">&quot;value&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<span class="co1">//Create a querystring from the input value:</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> queryString <span class="sy0">=</span> <span class="kw1">encodeURI</span><span class="br0">&#40;</span><span class="st0">'?p='</span> <span class="sy0">+</span> iZip<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">			<span class="co1">//The location of our server-side proxy:</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> entryPoint <span class="sy0">=</span> <span class="st0">'(assets/)weather.php'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<span class="co1">//Compile the full URI for the request:</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> sUrl <span class="sy0">=</span> entryPoint <span class="sy0">+</span> queryString<span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Submitting request; zip code: &quot;</span> <span class="sy0">+</span> iZip<span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<span class="co1">//Make the reqeust:</span></div></li><li class="li1"><div class="de1">			<span class="kw2">var</span> request <span class="sy0">=</span> Y.<span class="me1">io</span><span class="br0">&#40;</span>sUrl<span class="sy0">,</span> <span class="br0">&#123;</span></div></li><li class="li2"><div class="de2">				method<span class="sy0">:</span><span class="st0">&quot;GET&quot;</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">				on<span class="sy0">:</span></div></li><li class="li1"><div class="de1">					<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">						success<span class="sy0">:</span>successHandler<span class="sy0">,</span></div></li><li class="li1"><div class="de1">						failure<span class="sy0">:</span>failureHandler</div></li><li class="li2"><div class="de2">					<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">				<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">			<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li2"><div class="de2">		<span class="co1">//Use the Event Utility to wire the Get RSS button</span></div></li><li class="li1"><div class="de1">		<span class="co1">//to the getModule function:</span></div></li><li class="li1"><div class="de1">		Y.<span class="me1">on</span><span class="br0">&#40;</span><span class="st0">&quot;click&quot;</span><span class="sy0">,</span> getModule<span class="sy0">,</span> <span class="st0">&quot;#getWeather&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;When you retrieve weather RSS data, relevant steps in the process will be reported here in the logger/console.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">	<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre></div><div class="nonumbers"><pre class="javascript" style="font-family:monospace;">YUI<span class="br0">&#40;</span><span class="br0">&#123;</span>base<span class="sy0">:</span><span class="st0">&quot;../../build/&quot;</span><span class="sy0">,</span> timeout<span class="sy0">:</span> <span class="nu0">10000</span><span class="br0">&#125;</span><span class="br0">&#41;</span>.<span class="kw2">use</span><span class="br0">&#40;</span><span class="st0">&quot;io&quot;</span><span class="sy0">,</span>
&nbsp;
	<span class="kw2">function</span><span class="br0">&#40;</span>Y<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
		<span class="co1">//Get a Node reference to the div we'll use for displaying</span>
		<span class="co1">//results:</span>
		<span class="kw2">var</span> div <span class="sy0">=</span> Y.<span class="me1">Node</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">'#weatherModule'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
		<span class="co1">//Define a function to handle a successful response from</span>
		<span class="co1">//Yahoo! Weather.  The success handler will find the response</span>
		<span class="co1">//object in its second argument:</span>
		<span class="kw2">function</span> successHandler<span class="br0">&#40;</span>id<span class="sy0">,</span> o<span class="br0">&#41;</span><span class="br0">&#123;</span>
			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler called; handler will parse the retrieved XML and insert into DOM.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw2">var</span> root <span class="sy0">=</span> o.<span class="me1">responseXML</span>.<span class="me1">documentElement</span><span class="sy0">;</span>
			<span class="kw2">var</span> oTitle <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span>
			<span class="kw2">var</span> oDateTime <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'lastBuildDate'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span>
			<span class="kw2">var</span> descriptionNode <span class="sy0">=</span> root.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">'description'</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>.<span class="me1">firstChild</span>.<span class="me1">nodeValue</span><span class="sy0">;</span>
&nbsp;
			div.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;innerHTML&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oTitle <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> <span class="st0">&quot;&lt;p&gt;&quot;</span> <span class="sy0">+</span> oDateTime <span class="sy0">+</span> <span class="st0">&quot;&lt;/p&gt;&quot;</span> <span class="sy0">+</span> descriptionNode<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Success handler is complete.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
&nbsp;
		<span class="co1">//Provide a function that can help debug failed</span>
		<span class="co1">//requests:</span>
		<span class="kw2">function</span> failureHandler<span class="br0">&#40;</span>id<span class="sy0">,</span> o<span class="br0">&#41;</span><span class="br0">&#123;</span>
			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Failure handler called; http status: &quot;</span> <span class="sy0">+</span> o.<span class="kw3">status</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
			div.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;innerHTML&quot;</span><span class="sy0">,</span> o.<span class="kw3">status</span> <span class="sy0">+</span> <span class="st0">&quot; &quot;</span> <span class="sy0">+</span> o.<span class="me1">statusText</span><span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
&nbsp;
		<span class="co1">//When the Get RSS button is clicked, this function will fire</span>
		<span class="co1">//and compose/dispatch the IO request:</span>
		<span class="kw2">function</span> getModule<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
			<span class="co1">//Get the input value:</span>
			<span class="kw2">var</span> iZip <span class="sy0">=</span> Y.<span class="me1">Node</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">'#zip'</span><span class="br0">&#41;</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="st0">&quot;value&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
			<span class="co1">//Create a querystring from the input value:</span>
			<span class="kw2">var</span> queryString <span class="sy0">=</span> <span class="kw1">encodeURI</span><span class="br0">&#40;</span><span class="st0">'?p='</span> <span class="sy0">+</span> iZip<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
			<span class="co1">//The location of our server-side proxy:</span>
			<span class="kw2">var</span> entryPoint <span class="sy0">=</span> <span class="st0">'(assets/)weather.php'</span><span class="sy0">;</span>
&nbsp;
			<span class="co1">//Compile the full URI for the request:</span>
			<span class="kw2">var</span> sUrl <span class="sy0">=</span> entryPoint <span class="sy0">+</span> queryString<span class="sy0">;</span>
&nbsp;
			Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;Submitting request; zip code: &quot;</span> <span class="sy0">+</span> iZip<span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
			<span class="co1">//Make the reqeust:</span>
			<span class="kw2">var</span> request <span class="sy0">=</span> Y.<span class="me1">io</span><span class="br0">&#40;</span>sUrl<span class="sy0">,</span> <span class="br0">&#123;</span>
				method<span class="sy0">:</span><span class="st0">&quot;GET&quot;</span><span class="sy0">,</span>
				on<span class="sy0">:</span>
					<span class="br0">&#123;</span>
						success<span class="sy0">:</span>successHandler<span class="sy0">,</span>
						failure<span class="sy0">:</span>failureHandler
					<span class="br0">&#125;</span>
				<span class="br0">&#125;</span>
			<span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
&nbsp;
		<span class="co1">//Use the Event Utility to wire the Get RSS button</span>
		<span class="co1">//to the getModule function:</span>
		Y.<span class="me1">on</span><span class="br0">&#40;</span><span class="st0">&quot;click&quot;</span><span class="sy0">,</span> getModule<span class="sy0">,</span> <span class="st0">&quot;#getWeather&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
		Y.<span class="me1">log</span><span class="br0">&#40;</span><span class="st0">&quot;When you retrieve weather RSS data, relevant steps in the process will be reported here in the logger/console.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;info&quot;</span><span class="sy0">,</span> <span class="st0">&quot;example&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre></div><textarea id="syntax-ab62e8f22fc956412f4992ef946e6bff-plain">YUI({base:"../../build/", timeout: 10000}).use("io",

	function(Y) {

		//Get a Node reference to the div we'll use for displaying
		//results:
		var div = Y.Node.get('#weatherModule');

		//Define a function to handle a successful response from
		//Yahoo! Weather.  The success handler will find the response
		//object in its second argument:
		function successHandler(id, o){
			Y.log("Success handler called; handler will parse the retrieved XML and insert into DOM.", "info", "example");
			var root = o.responseXML.documentElement;
			var oTitle = root.getElementsByTagName('description')[0].firstChild.nodeValue;
			var oDateTime = root.getElementsByTagName('lastBuildDate')[0].firstChild.nodeValue;
			var descriptionNode = root.getElementsByTagName('description')[1].firstChild.nodeValue;

			div.set("innerHTML", "<p>" + oTitle + "</p>" + "<p>" + oDateTime + "</p>" + descriptionNode);

			Y.log("Success handler is complete.", "info", "example");
		}

		//Provide a function that can help debug failed
		//requests:
		function failureHandler(id, o){
			Y.log("Failure handler called; http status: " + o.status, "info", "example");
			div.set("innerHTML", o.status + " " + o.statusText);
		}

		//When the Get RSS button is clicked, this function will fire
		//and compose/dispatch the IO request:
		function getModule(){
			//Get the input value:
			var iZip = Y.Node.get('#zip').get("value");

			//Create a querystring from the input value:
			var queryString = encodeURI('?p=' + iZip);

			//The location of our server-side proxy:
			var entryPoint = '(assets/)weather.php';

			//Compile the full URI for the request:
			var sUrl = entryPoint + queryString;

			Y.log("Submitting request; zip code: " + iZip, "info", "example");

			//Make the reqeust:
			var request = Y.io(sUrl, {
				method:"GET",
				on:
					{
						success:successHandler,
						failure:failureHandler
					}
				}
			);
		}

		//Use the Event Utility to wire the Get RSS button
		//to the getModule function:
		Y.on("click", getModule, "#getWeather");

		Y.log("When you retrieve weather RSS data, relevant steps in the process will be reported here in the logger/console.", "info", "example");
	}
);</textarea></div>
<h3>Proxy and Response</h3>
<p>
Once <code>weather.php</code> receives the querystring, it will construct and send an HTTP GET using CURL to retrieve the results from the Yahoo! Weather RSS feed.  This allows the transaction to succeed while working around XMLHttpRequest's strict security policy.
</p>

<div id="syntax-64e17c01de25336ae5e586344239c8dd" class="yui-syntax-highlight"><div class="numbers"><pre class="javascript" style="font-family:monospace;"><ol><li class="li1"><div class="de1"><span class="co1">//Within a PHP block:</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Since the result is an XML document, the Content-type</span></div></li><li class="li1"><div class="de1"><span class="co1">// header must be set to &quot;text/xml&quot; for the data to be</span></div></li><li class="li2"><div class="de2"><span class="co1">// treated as XML and to populate responseXML.</span></div></li><li class="li1"><div class="de1">header<span class="br0">&#40;</span><span class="st0">&quot;Content-Type:text/xml&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// io-weather_clean.html is the resource path of the Y! Weather RSS</span></div></li><li class="li1"><div class="de1"><span class="co1">// with the appended querystring of zip code/location id.</span></div></li><li class="li2"><div class="de2">$url <span class="sy0">=</span> <span class="st0">'http://xml.weather.yahoo.com/forecastrss?'</span>.<span class="me1">getenv</span><span class="br0">&#40;</span><span class="st0">'QUERY_STRING'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// This function initializes CURL, sets the necessary CURL</span></div></li><li class="li1"><div class="de1"><span class="co1">// options, executes the request and returns the results.</span></div></li><li class="li1"><div class="de1"><span class="kw2">function</span> getResource<span class="br0">&#40;</span>io<span class="sy0">-</span>weather_clean.<span class="me1">html</span><span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li2"><div class="de2">        $ch <span class="sy0">=</span> curl_init<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        curl_setopt<span class="br0">&#40;</span>$ch<span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span> $url<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        curl_setopt<span class="br0">&#40;</span>$ch<span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        $result <span class="sy0">=</span> curl_exec<span class="br0">&#40;</span>$ch<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        curl_close<span class="br0">&#40;</span>$ch<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li2"><div class="de2">&nbsp;</div></li><li class="li1"><div class="de1">        <span class="kw1">return</span> $result<span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Call getResource to make the request.</span></div></li><li class="li2"><div class="de2">$feed <span class="sy0">=</span> getResource<span class="br0">&#40;</span>$url<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Return the results.</span></div></li><li class="li1"><div class="de1">echo $feed<span class="sy0">;</span></div></li></ol></pre></div><div class="nonumbers"><pre class="javascript" style="font-family:monospace;"><span class="co1">//Within a PHP block:</span>
&nbsp;
<span class="co1">// Since the result is an XML document, the Content-type</span>
<span class="co1">// header must be set to &quot;text/xml&quot; for the data to be</span>
<span class="co1">// treated as XML and to populate responseXML.</span>
header<span class="br0">&#40;</span><span class="st0">&quot;Content-Type:text/xml&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// io-weather_clean.html is the resource path of the Y! Weather RSS</span>
<span class="co1">// with the appended querystring of zip code/location id.</span>
$url <span class="sy0">=</span> <span class="st0">'http://xml.weather.yahoo.com/forecastrss?'</span>.<span class="me1">getenv</span><span class="br0">&#40;</span><span class="st0">'QUERY_STRING'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// This function initializes CURL, sets the necessary CURL</span>
<span class="co1">// options, executes the request and returns the results.</span>
<span class="kw2">function</span> getResource<span class="br0">&#40;</span>io<span class="sy0">-</span>weather_clean.<span class="me1">html</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        $ch <span class="sy0">=</span> curl_init<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        curl_setopt<span class="br0">&#40;</span>$ch<span class="sy0">,</span> CURLOPT_URL<span class="sy0">,</span> $url<span class="br0">&#41;</span><span class="sy0">;</span>
        curl_setopt<span class="br0">&#40;</span>$ch<span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
        $result <span class="sy0">=</span> curl_exec<span class="br0">&#40;</span>$ch<span class="br0">&#41;</span><span class="sy0">;</span>
        curl_close<span class="br0">&#40;</span>$ch<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="kw1">return</span> $result<span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">// Call getResource to make the request.</span>
$feed <span class="sy0">=</span> getResource<span class="br0">&#40;</span>$url<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Return the results.</span>
echo $feed<span class="sy0">;</span></pre></div><textarea id="syntax-64e17c01de25336ae5e586344239c8dd-plain">//Within a PHP block:

// Since the result is an XML document, the Content-type
// header must be set to "text/xml" for the data to be
// treated as XML and to populate responseXML.
header("Content-Type:text/xml");

// io-weather_clean.html is the resource path of the Y! Weather RSS
// with the appended querystring of zip code/location id.
$url = 'http://xml.weather.yahoo.com/forecastrss?'.getenv('QUERY_STRING');

// This function initializes CURL, sets the necessary CURL
// options, executes the request and returns the results.
function getResource(io-weather_clean.html){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $result = curl_exec($ch);
        curl_close($ch);

        return $result;
}

// Call getResource to make the request.
$feed = getResource($url);

// Return the results.
echo $feed;</textarea></div>				</div>
				<div class="yui-u sidebar">
					
				
					<div id="examples" class="mod box4">
                        <div class="hd">
						<h4>
    IO Examples:</h4>
                        </div>
						<div class="bd">
							<ul>
								<li><a href='../io/io-get.html'>GET Transaction</a></li><li><a href='../io/io-post.html'>POST Transaction</a></li><li class='selected'><a href='../io/io-weather.html'>XML Transaction &mdash; Retrieving a Yahoo! Weather RSS (XML) Feed via a Server-Side Proxy</a></li><li><a href='../io/io-xdr.html'>Cross-Domain JSON Transaction &mdash; Retrieving a News Feed from Yahoo! Pipes</a></li><li><a href='../node-menunav/node-menunav-8.html'>Adding Submenus On The Fly (included with examples for MenuNav Node Plugin)</a></li><li><a href='../overlay/overlay-io-plugin.html'>IO Plugin (included with examples for Overlay)</a></li><li><a href='../dd/portal-drag.html'>Portal Style Example (included with examples for Drag &amp; Drop)</a></li>							</ul>
						</div>
					</div>
					
					<div class="mod box4">
                        <div class="hd">
						<h4>More IO Resources:</h4>
                        </div>
                        <div class="bd">
						<ul>
							<!-- <li><a href="http://developer.yahoo.com/yui/io/">User's Guide</a> (external)</li> -->
<li><a href="../../api/module_io.html">API Documentation</a></li></ul>
                        </div>
					</div>
			  </div>
		</div>
		
		</div>
	</div>


<div class="yui-b toc3" id="tocWrapper">
<!-- TABLE OF CONTENTS -->
<div id="toc">
	
<ul>
<li class="sect first">YUI 3 Resources</li><li class="item"><a title="YUI 3 -- Yahoo! User Interface (YUI) Library" href="http://developer.yahoo.com/yui/3/">YUI 3 Web Site</a></li><li class="item"><a title="Examples of every YUI utility and control in action" href="../../examples/">YUI 3 Examples</a></li><li class="item"><a title="Instantly searchable API documentation for the entire YUI library." href="../../api/">YUI 3 API Docs</a></li><li class="item"><a title="YUI 3 Dependency Configurator -- configure your custom YUI implementation" href="http://developer.yahoo.com/yui/3/configurator/index.html">YUI 3 Dependency Configurator</a></li><li class="item"><a title="The YUI 3 Forum on YUILibrary.com" href="http://yuilibrary.com/forum/viewforum.php?f=15">YUI 3 Forums (external)</a></li><li class="item"><a title="Found a bug or a missing feature? Let us know on YUILibrary.com." href="http://developer.yahoo.com/yui/articles/reportingbugs/">Bug Reports/Feature Requests</a></li><li class="item"><a title="YUI is free and open, offered under a BSD license." href="http://developer.yahoo.com/yui/license.html">YUI License</a></li><li class="item"><a title="Download and fork the YUI project on GitHub" href="http://github.com/yui">YUI on Github</a></li><li class="item"><a title="The Yahoo! User Interface Blog" href="http://yuiblog.com">YUI Blog (external)</a></li><li class="sect">YUI 3 Core - Examples</li><li class="item"><a title="YUI Global Object - Functional Examples" href="../../examples/yui/index.html">YUI Global Object</a></li><li class="item"><a title="Event - Functional Examples" href="../../examples/event/index.html">Event</a></li><li class="item"><a title="Node - Functional Examples" href="../../examples/node/index.html">Node</a></li><li class="sect">YUI 3 Component Infrastructure - Examples</li><li class="item"><a title="Attribute - Functional Examples" href="../../examples/attribute/index.html">Attribute</a></li><li class="item"><a title="Plugin - Functional Examples" href="../../examples/plugin/index.html">Plugin</a></li><li class="item"><a title="Widget - Functional Examples" href="../../examples/widget/index.html">Widget</a></li><li class="sect">YUI 3 Utilities - Examples</li><li class="item"><a title="Animation - Functional Examples" href="../../examples/anim/index.html">Animation</a></li><li class="item"><a title="AsyncQueue - Functional Examples" href="../../examples/async-queue/index.html">AsyncQueue</a></li><li class="item"><a title="Cache - Functional Examples" href="../../examples/cache/index.html">Cache</a></li><li class="item"><a title="Cookie - Functional Examples" href="../../examples/cookie/index.html">Cookie</a></li><li class="item"><a title="DataSchema - Functional Examples" href="../../examples/dataschema/index.html">DataSchema <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="DataSource - Functional Examples" href="../../examples/datasource/index.html">DataSource <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="DataType - Functional Examples" href="../../examples/datatype/index.html">DataType <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Drag &amp; Drop - Functional Examples" href="../../examples/dd/index.html">Drag &amp; Drop</a></li><li class="item"><a title="Editor - Functional Examples" href="../../examples/editor/index.html">Editor <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Get - Functional Examples" href="../../examples/get/index.html">Get</a></li><li class="item"><a title="History - Functional Examples" href="../../examples/history/index.html">History <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="selected "><a title="IO - Functional Examples" href="../../examples/io/index.html">IO</a></li><li class="item"><a title="ImageLoader - Functional Examples" href="../../examples/imageloader/index.html">ImageLoader</a></li><li class="item"><a title="Internationalization - Functional Examples" href="../../examples/intl/index.html">Internationalization <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="JSON (JavaScript Object Notation) - Functional Examples" href="../../examples/json/index.html">JSON</a></li><li class="item"><a title="JSONP (JSON with Padding) - Functional Examples" href="../../examples/jsonp/index.html">JSONP <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Stylesheet - Functional Examples" href="../../examples/stylesheet/index.html">Stylesheet</a></li><li class="item"><a title="Sortable - Functional Examples" href="../../examples/sortable/index.html">Sortable <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Transition - Functional Examples" href="../../examples/transition/index.html">Transition <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Uploader - Functional Examples" href="../../examples/uploader/index.html">Uploader <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="YQL Query - Functional Examples" href="../../examples/yql/index.html">YQL Query <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="sect">YUI 3 Widgets - Examples</li><li class="item"><a title="Overlay - Functional Examples" href="../../examples/overlay/index.html">Overlay <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="ScrollView - Functional Examples" href="../../examples/scrollview/index.html">ScrollView <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Slider - Functional Examples" href="../../examples/slider/index.html">Slider <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Tabview - Functional Examples" href="../../examples/tabview/index.html">Tabview <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="sect">YUI 3 Node Plugins - Examples</li><li class="item"><a title="FocusManager Node Plugin - Functional Examples" href="../../examples/node-focusmanager/index.html">FocusManager Node Plugin <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="MenuNav Node Plugin - Functional Examples" href="../../examples/node-menunav/index.html">MenuNav Node Plugin <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="sect">YUI 3 CSS - Examples</li><li class="item"><a title="YUI Base - Functional Examples" href="../../examples/cssbase/index.html">CSS Base</a></li><li class="item"><a title="YUI Fonts - Functional Examples" href="../../examples/cssfonts/index.html">CSS Fonts</a></li><li class="item"><a title="YUI Grids - Functional Examples" href="../../examples/cssgrids/index.html">CSS Grids <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="YUI CSS Reset - Functional Examples" href="../../examples/cssreset/index.html">CSS Reset</a></li><li class="sect">YUI 3 Developer Tools - Examples</li><li class="item"><a title="Console - Functional Examples" href="../../examples/console/index.html">Console <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Console Filters Plugin- Functional Examples" href="../../examples/console-filters/index.html">Plugin.ConsoleFilters <img alt='beta' src='http://l.yimg.com/a/i/not/beta_1.gif'></a></li><li class="item"><a title="Profiler - Functional Examples" href="../../examples/profiler/index.html">Profiler</a></li><li class="item"><a title="Test - Functional Examples" href="../../examples/test/index.html">Test</a></li><li class="sect">Other Useful YUI 3 Resources</li><li class="item"><a title="Answers to Frequently Asked Questions about the YUI Library" href="http://developer.yahoo.com/yui/articles/faq/">YUI FAQ (external)</a></li><li class="item"><a title="Yahoo!'s philosophy of Graded Browser Support" href="http://developer.yahoo.com/yui/articles/gbs/">Graded Browser Support (external)</a></li><li class="item"><a title="Videos and podcasts from the YUI Team and from the Yahoo! frontend engineering community." href="http://developer.yahoo.com/yui/theater/">YUI Theater (external)</a></li></ul>
</div>
</div>
	</div><!--closes bd-->

	<div id="ft">
        <p class="first">Copyright &copy; 2010 Yahoo! Inc. All rights reserved.</p>
        <p><a href="http://privacy.yahoo.com/privacy/us/devel/index.html">Privacy Policy</a> - 
            <a href="http://docs.yahoo.com/info/terms/">Terms of Service</a> - 
            <a href="http://docs.yahoo.com/info/copyright/copyright.html">Copyright Policy</a> - 
            <a href="http://careers.yahoo.com/">Job Openings</a></p>
	</div>
</div>
<script language="javascript"> 
var yuiConfig = {};
</script>
<script src="../../assets/syntax.js"></script>
<script src="../../assets/dpSyntaxHighlighter.js"></script>
<script language="javascript"> 
dp.SyntaxHighlighter.HighlightAll('code'); 
</script>
</body>
</html>
